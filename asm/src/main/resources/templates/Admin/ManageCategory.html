<!DOCTYPE html>
<html lang="en">
    <head th:replace="~{/Layout/Head}">
        <title>_____</title>
    </head>
    <head>
        <link rel="stylesheet" th:href="@{/CSS/ManageCate.css}">
    </head>
<body>
    <div class="d-flex">
        <th:block th:replace="~{/Layout/Sidebar}"></th:block>

        <div class="content">
            <div class="form-container">
                <form action="/Admin/ManageCategory" th:object="${item}" method="post" class="row g-3">
                    <div class="col-12 col-md-6">
                        <label class="form-label">ID LOẠI SẢN PHẨM</label>
                        <input th:field="*{id}" class="form-control" placeholder="Nhập ID Loại Sản Phẩm" required>
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="form-label">TÊN LOẠI SẢN PHẨM</label>
                        <input th:field="*{name}" class="form-control" placeholder="Nhập Tên Loại Sản Phẩm" required>
                    </div>
                    <div class="col-12 d-flex justify-content-end gap-2 mt-3">
                        <button type="submit" formaction="/managecategory/create" class="btn btn-success">TẠO MỚI</button>
                        <button type="submit" formaction="/managecategory/update" class="btn btn-primary">CẬP NHẬT</button>
                        <a th:href="@{|/managecategory/delete/${item.id}|}" class="btn btn-danger">DELETE</a>
                        <a href="/managecategory" class="btn btn-secondary">RESET</a>
                    </div>
                </form>
            </div>

            <!-- Bảng hiển thị danh sách loại sản phẩm -->
            <div class="table-wrapper">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th>ID Loại Sản Phẩm</th>
                                <th>Tên Loại Sản Phẩm</th>
                                <th>Hành Động</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="item : ${items}">
                                <td th:text="${item.id}"></td>
                                <td th:text="${item.name}"></td>
                                <td>
                                    <a th:href="@{|/managecategory/edit/${item.id}|}" class="btn btn-warning btn-sm">
                                        <i class="fa-regular fa-pen-to-square me-1"></i> Chỉnh Sửa
                                    </a>
                                </td>
                            </tr>
                            <tr th:if="${items.isEmpty()}">
                                <td colspan="3" class="text-center text-muted py-4">Không có danh mục nào</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const links = document.querySelectorAll(".sidebar .nav-link");
            const currentPage = localStorage.getItem("activePage");
    
            if (currentPage) {
                links.forEach(link => {
                    if (link.getAttribute("href") === currentPage) {
                        link.classList.add("active");
                    } else {
                        link.classList.remove("active");
                    }
                });
            }
    
            links.forEach(link => {
                link.addEventListener("click", function () {
                    localStorage.setItem("activePage", this.getAttribute("href"));
                    links.forEach(l => l.classList.remove("active"));
                    this.classList.add("active");
                });
            });
        });
    </script>
</body>
</html>